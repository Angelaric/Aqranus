"Aqranus is a magnificent city located on a high mountain" (Idr., 4, 4), states the Muslim geographer al-Idrisi, who worked as the court cartographer for the king Roger II of Palermo and lived in SIcily during the 12th century. In his book, “A Diversion for the Man Longing to Travel to Far-Off Places”, al-Idrisi describes all the regions of the known world. When discussing the territory of modern-day Bulgaria, he mentions Aqranus. Other historical sources, including works by Niketas Choniates (Nic. Chon. Hist., 3, 3), George Pachymeres (Geo. Pach., Hist., 3, 26), Manuel Philes (Man. Phil., Poem., 234-239), and the charter of Bulgarian Tsar Ivan Asen II (Chart. Ivan Asen II)mention the city of Kran. Modern-day historians connect the ancient Aqranus of al-Idrisi with the medieval Bulgarian city of Kran. Yet, nobody knows where exactly Kran is located.
Somewhere in the heart of medieval Bulgaria, Kran served as an administrative center and, for a brief period, even became the capital of a breakaway state. Most researchers place Kran in the Kazanlak Valley in Central Bulgaria, associating it with the fortress near the modern-day town of Kran, close to Kazanlak in Stara Zagora Province. Others propose that Kran could be identified with fortresses near the village of Tazha, located west of Kazanlak. Recently, two other suggestions have pinpointed the modern-day town of Kazanlak as well as a settlement south of the Kazanlak Valley. All these proposals are based on historical records, primarily the text of al-Idrisi, which states that Aqranus is six days' march from Istibuni (modern-day Ihtiman), 40 miles from Farui (modern-day Stara Zagora), and four days' march from Lufisa (modern-day Lovech). One mile according to al-Idrisi is approximately one and a half kilometers, and a day’s march is around 23–25 miles. Using those equations we can translate into modern distance units: 217.7 km from Istibuni, 62.2 km from Farui, and 144.9 km from Lufisa. 
To find the location of the city, I translate these measurements into GIS using three increasingly sophisticated methods and explore their intersections. First, I create buffers representing distances from the respective cities. Second, I create walking isochrones. Third, I explore the full length of these distances within a mediaeval road network. Finally I validate options with one additional line of evidence.
This project consists of the codes I used to reach my goal. 


Hello Angel, can you offer an indication of what order should the scripts be run in? Thank you :).
